
平衡三进制，也称为对称三进制。这是一个不太标准的**计数体系**。正规的三进制的数字都是由 `0`,`1`,`2` 构成的，而平衡三进制的数字是由 `-1`,`0`,`1` 构成的。它的基数也是 `3` (因为有三个可能的值)。由于将 `-1` 写成数字不方便，我们将使用字母 `Z`来代替 `-1` 。

这里有几个例子:
```text
    0    0
    1    1
    2    1Z
    3    10
    4    11
    5    1ZZ
    6    1Z0
    7    1Z1
    8    10Z
    9    100
```


该**计数体系**的负数表示起来很容易: 只需要将正数的数字倒转即可( `Z` 变成 `1` , `1` 变成 `Z` )。

```text
    -1   Z
    -2   Z1
    -3   Z0
    -4   ZZ
    -5   Z11
```
很容易就可以看到，负数最高位是 `Z` ，正数最高位是 `1` 。

## 转换算法

在平衡三进制的转转换法中，需要先写出一个给定的数 `x` 在标准三进制中的表示。当 `x` 是用标准三进制表示时，其数字的每一位都是 `0` 、`1` 或 `2` 。从最低的数字开始迭代，我们可以先跳过任何的 `0` 和 `1` ，但是如果遇到 `2` 就应该先将其变成 `Z`，下一位数字再加上 `1` 。而遇到数字 `3` 则应该转换为 `0` 下一位数字再加上 `1` 。


### 应用一

把 `64` 转换成平衡三进制。

首先，我们用标准三进制数来重写这个数:

$$64_{10} = 02101_3$$

让我们从对整个数影响最小的数字(最低位)进行处理：

- `101` 被跳过（因为在平衡三进制中允许 `0` 和 `1` ）；
- `2` 变成了 `Z` ，它左边的数字加 `1` ，得到 `1Z101`；
- `1` 被跳过，得到 `1Z101` 。

最终的结果是 `1Z101`。

我们再把它转换回十进制:

$$
1Z101 = 81 \cdot 1 + 27 \cdot (-1) + 9 \cdot 1 + 3 \cdot 0 + 1 \cdot 1 = 64_{10}
$$

### 应用二

把 `237` 转换成平衡三进制。

首先，我们用标准三进制数来重写这个数:

$$237_{10} = 22210_3$$

- `0` 和 `1` 被跳过(因为在平衡三进制中允许 `0` 和 `1` )；
- `2` 变成 `Z` ，左边的数字加 `1` ，得到 `23Z10` ；
- `3` 变成 `0` ，左边的数字加 `1` ，得到 `30Z10` ；
- `3` 变成 `0` ，左边的数字(默认是 `0` )加 `1` ，得到 `100Z10` ；
- `1` 被跳过，得到 `100Z10` 。

最终的结果是 `100Z10` 。

我们再把它转换回十进制：

$$
100Z10 = 243 \cdot 1 + 81 \cdot 0 + 27 \cdot 0 + 9 \cdot (-1) + 3 \cdot 1 + 1 \cdot 0 = 237_{10}
$$


## 练习题

[Topcoder SRM 604, Div1-250](https://community.topcoder.com/stat?c=problem_statement&pm=12917&rd=15837)


**本页面部分内容译自博文 [Троичная сбалансированная система счисления](http://e-maxx.ru/algo/balanced_ternary) 与其英文翻译版 [Balanced Ternary](https://cp-algorithms.com/algebra/balanced-ternary.html) 。其中俄文版版权协议为 Public Domain + Leave a Link；英文版版权协议为 CC-BY-SA 4.0。**


